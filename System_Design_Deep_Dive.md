
# üìò System Design ‚Äî –ì–ª—É–±–æ–∫–∏–π —Ä–∞–∑–±–æ—Ä (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏)

> –í–µ—Ä—Å–∏—è: 1.0 ‚Ä¢ –§–æ–∫—É—Å: –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, trade-offs, —Å—Ö–µ–º—ã –∏ –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. –í–≤–µ–¥–µ–Ω–∏–µ –∏ –ø–æ–¥—Ö–æ–¥ –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –¥–∏–∑–∞–π–Ω—É
2. –°–æ–±—ã—Ç–∏–π–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥: Kafka, Pulsar, –æ—á–µ—Ä–µ–¥–∏ vs –ª–æ–≥–∏
3. NoSQL: –¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ, –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ, –≥—Ä–∞—Ñ–æ–≤—ã–µ ‚Äî –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É
4. –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î: –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, —à–∞—Ä–¥–∏–Ω–≥, NewSQL
5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: —É—Ä–æ–≤–Ω–∏, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, TTL/eviction, hot keys, CDN/edge
6. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å—Ç–∏–ª–∏: –º–æ–Ω–æ–ª–∏—Ç, –º–æ–¥—É–ª—å–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, EDA, serverless, –≥–µ–∫—Å–∞–≥–æ–Ω–∞
7. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: LB, CAP/PACELC, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, multi-region
8. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: circuit breaker, bulkhead, retry/backoff, rate limiting
9. Observability: –ª–æ–≥–∏/–º–µ—Ç—Ä–∏–∫–∏/—Ç—Ä–µ–π—Å—ã, SLI/SLO, golden signals, sampling
10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å–µ–∫—Ä–µ—Ç—ã, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, Zero Trust, supply chain
11. Data patterns: CQRS, Event Sourcing, outbox/inbox, CDC, materialized views, CRDT
12. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫–µ: –æ—Ü–µ–Ω–∫–∏ RPS/throughput/—Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —Ä–∞—Å—á—ë—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞
13. –ß–∞—Å—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∫–∞—Ä—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (AWS/Azure/GCP)
14. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è: —á–µ–∫-–ª–∏—Å—Ç—ã, –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Å–ª–æ–≤–∞—Ä—å —Ç–µ—Ä–º–∏–Ω–æ–≤

---

## 1) –í–≤–µ–¥–µ–Ω–∏–µ –∏ –ø–æ–¥—Ö–æ–¥

**System Design** ‚Äî —ç—Ç–æ –±–∞–ª–∞–Ω—Å **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏**, **–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**, **–∑–∞–¥–µ—Ä–∂–µ–∫**, **—Å—Ç–æ–∏–º–æ—Å—Ç–∏** –∏ **–ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏**. –ù–µ—Ç ¬´–∏–¥–µ–∞–ª—å–Ω—ã—Ö¬ª —Ä–µ—à–µ–Ω–∏–π ‚Äî –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥ **–≤–∞—à–∏ SLO** –∏ **–Ω–∞–≥—Ä—É–∑–∫—É**.

- –ù–∞—á–∏–Ω–∞–µ–º —Å **—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**: RPS, p95/p99 latency, –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö/—Å—É—Ç–∫–∏, –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –ø–æ—Ç–µ—Ä–∏/–ø–æ–≤—Ç–æ—Ä—ã, RPO/RTO, —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
- –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º **–ø—Ä–æ—Å—Ç—É—é** —Å—Ö–µ–º—É, –≤–∫–ª—é—á–∞–µ–º **–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**, –∏–∑–º–µ—Ä—è–µ–º, –∑–∞—Ç–µ–º **—ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É–µ–º** (evolutionary architecture).
- –í–µ–∑–¥–µ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** –∏ **–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ—Å—Ç—å** (replay, retry-safe).

```mermaid
flowchart LR
  R[Requirements] --> D[Design]
  D --> O[Observability]
  O --> M[Measure]
  M --> T[Tune & Evolve]
```

---

## 2) –°–æ–±—ã—Ç–∏–π–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥ (Kafka –∏ –¥—Ä.) ‚Äî ¬´–Ω–µ –æ—á–µ—Ä–µ–¥—å, –∞ –∂—É—Ä–Ω–∞–ª¬ª

### 2.1. –ü–æ—á–µ–º—É —Å—Ç—Ä–∏–º–∏–Ω–≥, –∞ –Ω–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –æ—á–µ—Ä–µ–¥—å
- **–û—á–µ—Ä–µ–¥—å (RabbitMQ/SQS)**: —Å–æ–æ–±—â–µ–Ω–∏–µ –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ ACK, —á–∏—Ç–∞–µ—Ç—Å—è **–æ–¥–Ω–∏–º** –∫–æ–Ω—Å—é–º–µ—Ä–æ–º –≤ –≥—Ä—É–ø–ø–µ. –•–æ—Ä–æ—à–æ –¥–ª—è ¬´—Å–¥–µ–ª–∞–π –∏ –∑–∞–±—É–¥—å¬ª, RPC-–ø–æ–¥–æ–±–Ω—ã—Ö –∑–∞–¥–∞—á.
- **–õ–æ–≥ (Kafka/Pulsar)**: —Å–æ–±—ã—Ç–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ **retention** –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—á–∏—Ç–∞–Ω–æ **–º–Ω–æ–≥–æ —Ä–∞–∑** —Ä–∞–∑–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏. –≠—Ç–æ –±–∞–∑–∞ –¥–ª—è **—Ä–µ–ø–ª–µ—è**, –∞—É–¥–∏—Ç-—Ç—Ä–µ–π–ª–æ–≤, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ü–∏–π.

```mermaid
sequenceDiagram
  participant P as Producer
  participant K as Kafka Topic (Partitions)
  participant A as Consumer Group A
  participant B as Consumer Group B
  P->>K: append(record)
  K-->>A: read(offsets A)
  K-->>B: read(offsets B)
```

### 2.2. –°—É—â–Ω–æ—Å—Ç–∏ Kafka –∏ –ø–æ—Ä—è–¥–æ–∫
- **Topic** ‚Üí **Partitions** (—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º).  
- **Key** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é (—Ö—ç—à). –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º –ø–æ–ø–∞–¥–∞—é—Ç **–≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **–ø–æ—Ä—è–¥–æ–∫ –ø–æ –∫–ª—é—á—É**.
- **Replication factor (RF)** + **ISR** ‚Üí –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–π (leader/followers).
- **Offset** ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏, —É –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Å—é–º–µ—Ä–∞ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.

**–ü—Ä–∞–≤–∏–ª–æ:** –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ **–Ω–µ—Ç** ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫ **–≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏**. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø–æ `orderId` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á `orderId`.

### 2.3. –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ (semantics)
- **At-most-once**: commit –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚Üí –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è.  
- **At-least-once**: commit –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚Üí **–Ω–µ—Ç –ø–æ—Ç–µ—Ä—å**, –Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã (**–Ω—É–∂–Ω–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**).  
- **Exactly-once (EOS)**: –≤ –∫–æ–Ω—Ç—É—Ä–µ Kafka‚ÜíKafka —Å **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º** –∏ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** (–ø–∞–∫–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å + –∫–æ–º–º–∏—Ç offsets –∫–∞–∫ –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è). –î–ª—è –≤–Ω–µ—à–Ω–∏—Ö sinks EOS –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–∞ –±–µ–∑ —Å–æ–≥–ª–∞—à–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ outbox/–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é).

### 2.4. –ü—Ä–æ–¥—é—Å–µ—Ä: –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
- `acks=all` + `min.insync.replicas>=2` ‚Üí –∑–∞–ø–∏—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ª–∏–¥–µ—Ä–æ–º –∏ –≤—Å–µ–º–∏ ISR.  
- `enable.idempotence=true` ‚Üí –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–µ—Ç—Ä–∞—è—Ö.  
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–æ–≤/–ø–∞—Ä—Ç–∏—Ü–∏–π + —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π commit offsets.
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: `batch.size`, `linger.ms`, `compression.type=zstd/lz4`, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ –ø–∞—Ä—Ç–∏—Ü–∏–π.

### 2.5. –ö–æ–Ω—Å—é–º–µ—Ä-–≥—Ä—É–ø–ø—ã, —Ä–µ–±–∞–ª–∞–Ω—Å, –ª–∞–≥
- –ì—Ä—É–ø–ø–∞ —á–∏—Ç–∞–µ—Ç —Ç–æ–ø–∏–∫ **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è ‚Üí –æ–¥–∏–Ω –∫–æ–Ω—Å—é–º–µ—Ä –∏–∑ –≥—Ä—É–ø–ø—ã.
- **Rebalance** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ ‚Üí –ª—É—á—à–µ **sticky assignor**, —á—Ç–æ–±—ã –Ω–µ ¬´–¥–µ—Ä–≥–∞—Ç—å¬ª –ø–∞—Ä—Ç–∏—Ü–∏–∏ —á–∞—Å—Ç–æ.
- **–ö–æ–º–º–∏—Ç—ã**: –≤—Ä—É—á–Ω—É—é (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏) –∏–ª–∏ –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç (–ø—Ä–æ—â–µ, –Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π).
- **Lag** ‚Äî –∫–ª—é—á–µ–≤–æ–π SLI: –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –æ—Ç ¬´–≥–æ–ª–æ–≤—ã¬ª –ª–æ–≥–∞.

### 2.6. Retention –∏ compaction
- –ü–æ –≤—Ä–µ–º–µ–Ω–∏/–æ–±—ä—ë–º—É: —Å—Ä–µ–∑ —Å—Ç–∞—Ä—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤.  
- **Log Compaction**: —Ö—Ä–∞–Ω–∏—Ç—å **–ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** –ø–æ –∫–ª—é—á—É (state log). –£–¥–∞–ª–µ–Ω–∏–µ ‚Äî ¬´tombstone¬ª (key + null).  
- –†–µ–ø–ª–µ–π –∏ bootstrap state: –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ü–∏–∏.

### 2.7. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Outbox**: –ø–∏—à–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É **–≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** —Å –±–∏–∑–Ω–µ—Å-–∑–∞–ø–∏—Å—å—é ‚Üí Debezium (CDC) –≤—ã—á–∏—Ç—ã–≤–∞–µ—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –≤ Kafka. –ò–∑–±–µ–≥–∞–µ–º dual write.
- **CDC**: —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î –≤ —Å–æ–±—ã—Ç–∏—è (binlog/WAL).
- **–°–∞–≥–∏**: –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è/—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è –¥–æ–ª–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è.
- **Stream Processing**: Kafka Streams/Flink –¥–ª—è –æ–∫–æ–Ω, –∞–≥—Ä–µ–≥–∞—Ç–æ–≤, join‚Äô–æ–≤, stateful-–æ–±—Ä–∞–±–æ—Ç–∫–∏.

### 2.8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Å—Ö–µ–º—ã –∏ —ç–≤–æ–ª—é—Ü–∏—è
- **SASL/SSL** + **ACL** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- **Schema Registry** (Avro/Protobuf/JSON-Schema) + —Ä–µ–∂–∏–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (**backward/forward/full**).  
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π: –Ω–æ–≤—ã–µ –ø–æ–ª—è ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ, –Ω–µ –ª–æ–º–∞—Ç—å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.

### 2.9. –ö–æ–≥–¥–∞ –ù–ï —Å—Ç–æ–∏—Ç Kafka
- –°—É–ø–µ—Ä–Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å p99 < 1‚Äì2 –º—Å (–≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ ‚Äî in-memory/RPC).
- –°—Ç—Ä–æ–≥–∞—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ–∑ —Ä–µ–ø–ª–µ–µ–≤ ‚Üí –ø—Ä–æ—â–µ –æ—á–µ—Ä–µ–¥–∏.
- –û—á–µ–Ω—å –º–∞–ª—ã–µ –æ–±—ä—ë–º—ã, –≥–¥–µ –∂—É—Ä–Ω–∞–ª –∏ –∫–ª–∞—Å—Ç–µ—Ä –∏–∑–±—ã—Ç–æ—á–Ω—ã.

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ ¬´–≤ –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö¬ª:**
- **Kafka** ‚Äî –∂—É—Ä–Ω–∞–ª, **pull**, –ø–æ—Ä—è–¥–æ–∫ –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏, —Ä–µ–ø–ª–µ–π, –º–∞—Å—à—Ç–∞–± –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º.
- **RabbitMQ** ‚Äî –æ—á–µ—Ä–µ–¥—å, **push**, –≥–∏–±–∫–∏–π —Ä–æ—É—Ç–∏–Ω–≥ AMQP, —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–∏—Å—á–µ–∑–∞–µ—Ç¬ª –ø–æ—Å–ª–µ ack.
- **Pulsar** ‚Äî –ø–æ—Ö–æ–∂ –Ω–∞ Kafka, multi-tenant –∏–∑ –∫–æ—Ä–æ–±–∫–∏, storage –Ω–∞ BookKeeper.
- **Kinesis** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥ –≤ AWS.

---

## 3) NoSQL ‚Äî –∫–∞–∫–æ–π —Ç–∏–ø –∫–æ–≥–¥–∞ –±—Ä–∞—Ç—å (—Å –Ω—é–∞–Ω—Å–∞–º–∏)

### 3.1. –î–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ (MongoDB, Couchbase)

**–ò–¥–µ—è:** —Ö—Ä–∞–Ω–∏—Ç—å **–∞–≥—Ä–µ–≥–∞—Ç** —Ü–µ–ª–∏–∫–æ–º (DDD): –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç = –æ–¥–Ω–∞ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ì–∏–±–∫–∞—è/—ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—â–∞—è —Å—Ö–µ–º–∞, —Ä–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—è–º–∏.
- –ß–∞—Å—Ç—ã–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ –∞–ø–¥–µ–π—Ç—ã, offline/mobile.
- –ß—Ç–µ–Ω–∏–µ ¬´–æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ —Ü–µ–ª–∏–∫–æ–º¬ª –≤–∞–∂–Ω–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∫—Ä–æ—Å—Å-join‚Äô–æ–≤.

**–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: embed vs reference**
- **Embed**: –¥–æ—á–µ—Ä–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞ –≤–º–µ—Å—Ç–µ –∏ –Ω–µ —à–∞—Ä—è—Ç—Å—è.  
- **Reference**: –∫—Ä—É–ø–Ω—ã–µ/—Ä–∞–∑–¥–µ–ª—è–µ–º—ã–µ/—á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ —á–∞—Å—Ç–∏.

**–ò–Ω–¥–µ–∫—Å—ã –∏ –∑–∞–ø—Ä–æ—Å—ã**
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤–∞–∂–µ–Ω), partial, TTL, –≥–µ–æ.
- Aggregation pipeline: —Ñ–∏–ª—å—Ç—Ä ‚Üí —Å–æ—Ä—Ç ‚Üí –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ ‚Üí –ø—Ä–æ–µ–∫—Ü–∏–∏.

**–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**
- –î–æ–∫—É–º–µ–Ω—Ç ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ. Multi-document —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –µ—Å—Ç—å, –Ω–æ **–¥–æ—Ä–æ–≥–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–¥–∫–æ.

**–®–∞—Ä–¥–∏–Ω–≥**
- –í—ã–±–æ—Ä **shard key** –∫—Ä–∏—Ç–∏—á–µ–Ω: –±–µ–∑ ¬´–≥–æ—Ä—è—á–∏—Ö –∫–ª—é—á–µ–π¬ª. –ë–∞–ª–∞–Ω—Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è ‚Äî must.

**–ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –ü—ã—Ç–∞—Ç—å—Å—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å ¬´—Ä–µ–ª—è—Ü–∏–æ–Ω–∫—É –≤ Mongo¬ª —Å –∫—É—á–µ–π —Å—Å—ã–ª–æ–∫ –∏ join-–ø–æ–¥–æ–±–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.
- –•—Ä–∞–Ω–∏—Ç—å –æ–≥—Ä–æ–º–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (MB) ‚Äî –¥–æ—Ä–æ–≥–æ –¥–ª—è —Å–µ—Ç–∏ –∏ –¥–∏—Å–∫-–ø–æ–¥—Å–∏—Å—Ç–µ–º—ã.

---

### 3.2. –ö–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ (Redis, DynamoDB)

**–ò–¥–µ—è:** —É–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É; –≤ Redis ‚Äî –±–æ–≥–∞—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö—ç—à (TTL, eviction), —Å–µ—Å—Å–∏–∏, **rate limiting**, counters, **leaderboards** (Sorted Set).
- Pub/Sub, Streams, –∫—Ä–∞—Ç–∫–æ–∂–∏–≤—É—â–∏–µ idempotency keys.
- –í DynamoDB ‚Äî –∞–≤—Ç–æ—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—é–Ω–∏–º–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å; –¥–∏–∑–∞–π–Ω ¬´–æ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤¬ª.

**–ù—é–∞–Ω—Å—ã**
- Redis: persistence (RDB/AOF), —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, Sentinel/Cluster, eviction policies (LRU/LFU).
- DynamoDB: Partition Key + Sort Key, LSI/GSI; –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü **–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞**.

**–ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –°–ª–æ–∂–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ ad-hoc –∑–∞–ø—Ä–æ—Å—ã ‚Üí –Ω–µ —Å—é–¥–∞.
- –î–µ–ª–∞—Ç—å Redis ¬´–ø–µ—Ä–≤–∏—á–Ω–æ–π –ë–î¬ª –±–µ–∑ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–∏/–±—ç–∫–∞–ø–æ–≤.

---

### 3.3. –ö–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ (Cassandra, HBase)

**–ò–¥–µ—è:** –¥–µ—à—ë–≤—ã–µ –∑–∞–ø–∏—Å–∏, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±. –¢–∞–±–ª–∏—Ü–∞ = –∫–ª—é—á —Ä–∞–∑–¥–µ–ª–∞ + –∫–æ–ª–æ–Ω–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (LSM-–¥–µ—Ä–µ–≤—å—è).

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–∞–π–º-—Å–µ—Ä–∏–∏, —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –∑–∞–ø–∏—Å–µ–π/—Å–µ–∫).
- –ó–∞–ø—Ä–æ—Å—ã: ¬´–ø–æ—Å–ª–µ–¥–Ω–∏–µ N –ø–æ –∫–ª—é—á—É¬ª, –æ–∫–Ω–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –∞–≥—Ä–µ–≥–∞—Ç—ã.

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã**
- –õ–∏–Ω–µ–π–Ω—ã–π –º–∞—Å—à—Ç–∞–±, –∑–∞–ø–∏—Å—å –æ—á–µ–Ω—å –¥–µ—à–µ–≤–∞, **tunable consistency** (ONE/QUORUM/ALL).

**–ì—Ä–∞–±–ª–∏**
- –°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è **–æ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤**, JOIN –Ω–µ—Ç.
- Secondary indexes –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, ¬´–≥–æ—Ä—è—á–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏¬ª –æ–ø–∞—Å–Ω—ã.
- Tombstones –∏ compaction ‚Üí —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ –¥–∏—Å–∫–æ–º.

---

### 3.4. –ì—Ä–∞—Ñ–æ–≤—ã–µ (Neo4j, JanusGraph)

**–ò–¥–µ—è:** —É–∑–ª—ã –∏ —Ä—ë–±—Ä–∞, –±—ã—Å—Ç—Ä—ã–µ traversals –Ω–∞ –º–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–æ–≤.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –°–æ—Ü–≥—Ä–∞—Ñ—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∞–Ω—Ç–∏-—Ñ—Ä–æ–¥.
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (knowledge graph).

**–ù—é–∞–Ω—Å—ã**
- ACID –≤ —Ä–∞–º–∫–∞—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–ª–æ–∂–Ω–æ.
- –ó–∞–ø—Ä–æ—Å—ã: Cypher/Gremlin; –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —É–∑–ª–æ–≤/—Ä—ë–±–µ—Ä.

**–ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ –∫–∞–∫ main OLTP –¥–ª—è –≤—Å–µ–≥–æ –ø–æ–¥—Ä—è–¥ ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω–æ.

---

### 3.5. –ë—ã—Å—Ç—Ä–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ NoSQL

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ                                   | –î–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è | –ö–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–ª–æ–Ω–Ω–æ—á–Ω–∞—è | –ì—Ä–∞—Ñ–æ–≤–∞—è |
|---|---|---|---|---|
| –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞ –∏ –µ–¥–∏–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç                | ‚úÖ          | ‚ûñ            | ‚ûñ          | ‚ûñ      |
| –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏                      | ‚ö†Ô∏è          | ‚úÖ            | ‚úÖ          | ‚ûñ      |
| –î–∏–∞–ø–∞–∑–æ–Ω—ã/–≤—Ä–µ–º—è                              | ‚ö†Ô∏è          | ‚ûñ            | ‚úÖ          | ‚ûñ      |
| –ú–Ω–æ–≥–æ—Å–∫–∞—á–∫–æ–≤—ã–µ —Å–≤—è–∑–∏                         | ‚ûñ          | ‚ùå            | ‚ùå          | ‚úÖ      |
| TTL/–∫—Ä–∞—Ç–∫–æ–∂–∏–≤—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ                     | ‚ö†Ô∏è          | ‚úÖ            | ‚ö†Ô∏è          | ‚ùå      |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏                        | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è          | ‚ö†Ô∏è      |

---

## 4) –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î –∏ NewSQL ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ HA

### 4.1. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è
- **Primary/Replica**: –∑–∞–ø–∏—Å—å –Ω–∞ primary, —á—Ç–µ–Ω–∏–µ ‚Äî —Å —Ä–µ–ø–ª–∏–∫ (read scaling). –£—á–∏—Ç—ã–≤–∞–π—Ç–µ **replication lag** (read-your-writes –ª–æ–º–∞–µ—Ç—Å—è).
- **Multi-primary**: –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å ‚Äî –Ω—É–∂–Ω–∞ —Ä–µ–∑–æ–ª—é—Ü–∏—è.

### 4.2. –®–∞—Ä–¥–∏–Ω–≥
- –†–∞–∑–¥–µ–ª –ø–æ –∫–ª—é—á—É (userId hash). –¢—Ä–µ–±—É–µ—Ç **routing** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏/–ø—Ä–æ–∫—Å–∏ (Vitess, Citus).
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —à–∞—Ä–¥–æ–≤ ‚Äî —Å–ª–æ–∂–Ω—ã, –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∑–∞—Ä–∞–Ω–µ–µ.

### 4.3. NewSQL
- **CockroachDB/YugabyteDB**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, **Raft**-–∫–æ–Ω—Å–µ–Ω—Å—É—Å, –≥–µ–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, SQL-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

```mermaid
graph TD
  A[App] -->|SQL| C1[(Cockroach Node 1)]
  A -->|SQL| C2[(Cockroach Node 2)]
  A -->|SQL| C3[(Cockroach Node 3)]
  C1 <-- Raft --> C2
  C2 <-- Raft --> C3
```

---

## 5) –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

### 5.1. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏
- **Cache Aside**: —á–∏—Ç–∞–µ–º ‚Üí –µ—Å–ª–∏ miss, –∑–∞–±–∏—Ä–∞–µ–º –∏–∑ –ë–î –∏ –∫–ª–∞–¥—ë–º –≤ –∫—ç—à.
- **Write-Through**: –∑–∞–ø–∏—Å—å –≤ –ë–î –∏ –∫—ç—à —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- **Write-Behind**: –∑–∞–ø–∏—Å—å —Å–Ω–∞—á–∞–ª–∞ –≤ –∫—ç—à, –∑–∞—Ç–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –ë–î.
- **Read-Through**: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫—ç—à–∞ —Å–∞–º–∞ —Ö–æ–¥–∏—Ç –≤ –ë–î.

```mermaid
flowchart LR
  C[Client] --> K[Cache]
  K -- hit --> C
  K -- miss --> S[Service]
  S --> D[(DB)]
  S --> K
  S --> C
```

### 5.2. TTL –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
- TTL, –≤–µ—Ä—Å–∏–∏, **invalidation on write** (pub/sub —Ç–æ–ø–∏–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏).
- **Dogpile** (thundering herd) ‚Üí single-flight/lock, jitter –¥–ª—è TTL.
- **Hot keys**: —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ ¬´—Å–æ–ª–∏¬ª, –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫—ç—à–∏.

### 5.3. CDN/Edge
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –¥–∞–∂–µ –¥–∏–Ω–∞–º–∏–∫–∏ (HTML fragment cache).
- Edge-compute/Workers –¥–ª—è –Ω–∏–∑–∫–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

---

## 6) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å –∏ –∫–æ–≥–¥–∞

- **–ú–æ–Ω–æ–ª–∏—Ç** ‚Üí –±—ã—Å—Ç—Ä–µ–µ —Å—Ç–∞—Ä—Ç, –ø—Ä–æ—â–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏; –º–∞—Å—à—Ç–∞–± ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ/–ø–æ –º–æ–¥—É–ª—é.
- **–ú–æ–¥—É–ª—å–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç** ‚Üí –≥—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª–µ–π, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –º–æ–Ω–æ–ª–∏—Ç–∞.
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** ‚Üí –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ä–µ–ª–∏–∑—ã, –Ω–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–π/–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏/–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.
- **–ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è (Ports & Adapters)** ‚Üí –¥–æ–º–µ–Ω –≤–Ω–µ –¥–µ—Ç–∞–ª–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- **Event-Driven** ‚Üí —Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Ä–µ–ø–ª–µ–∏, –ø—Ä–æ–µ–∫—Ü–∏–∏.
- **Serverless** ‚Üí –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤—ã–∑–æ–≤—ã, cold start, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.

```mermaid
graph TD
  U[User] --> GW[API Gateway]
  GW --> S1[Auth Service]
  GW --> S2[Orders Service]
  GW --> S3[Payments Service]
  S2 -- events --> K[(Kafka)]
  S3 -- events --> K
  S1 --> R[(Redis Cache)]
  S2 --> P[(Postgres)]
  S3 --> C[(Cassandra)]
```

---

## 7) –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–≥–∏–æ–Ω—ã

- **LB**: Nginx/HAProxy/ELB ‚Äî –±–∞–ª–∞–Ω—Å –ø–æ —Ö—ç—à—É/–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º/–∑–¥–æ—Ä–æ–≤—å—é.  
- **CAP**: –ø—Ä–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ –≤—ã–±–∏—Ä–∞–µ–º C –∏–ª–∏ A.  
- **PACELC**: –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ partition ‚Äî **latency vs consistency**.  
- **Multi-region**: –∞–∫—Ç–∏–≤-–∞–∫—Ç–∏–≤ (eventual consistency, –∫–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª—é—Ü–∏—è), –∞–∫—Ç–∏–≤-–ø–∞—Å—Å–∏–≤ (—Ñ–µ–π–ª–æ–≤–µ—Ä, RTO/RPO).  
- **Clock & ID**: –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–µ —á–∞—Å—ã, **Snowflake**-–ø–æ–¥–æ–±–Ω—ã–µ ID (–≤–∫–ª—é—á–∞—é—Ç –≤—Ä–µ–º—è –∏ —à–∞—Ä–¥).

---

## 8) –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- **Circuit Breaker**: –Ω–µ –±–∏—Ç—å –ø–æ —É–ø–∞–≤—à–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, fallback.  
- **Bulkhead**: –∏–∑–æ–ª—è—Ü–∏—è –ø—É–ª–æ–≤/—Ä–µ—Å—É—Ä—Å–æ–≤ –º–µ–∂–¥—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.  
- **Retry+Exponential Backoff+Jitter**: –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å synchronized retry storm.  
- **Rate Limiting**: token/leaky bucket, sliding window ‚Äî –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —à–ª—é–∑–∞/Redis.

```mermaid
flowchart LR
  A[Client] -->|Requests| G[API Gateway]
  G -->|Check| RL[Rate Limiter]
  RL --> S[Service]
  S --> CB[Circuit Breaker]
  CB --> D[Dependency]
  CB -- open --> F[Fallback]
```

---

## 9) Observability

- **Golden Signals**: latency, traffic, errors, saturation.  
- **SLI/SLO/SLA**: —Ü–µ–ª–∏ –∏ –∞–ª–µ—Ä—Ç—ã –ø–æ SLO, –Ω–µ –ø–æ ¬´–∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–µ¬ª.  
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏** (JSON), –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø–æ traceId/spanId.  
- **Tracing**: W3C Trace Context/B3, OpenTelemetry, sampling (head/tail).  
- **–î–∞—à–±–æ—Ä–¥—ã**: –±–∏–∑–Ω–µ—Å-–ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ + —Ç–µ—Ö–ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –≤–º–µ—Å—Ç–µ.

```mermaid
flowchart TD
  App -->|metrics| Prom[Prometheus]
  App -->|traces| OTel[OpenTelemetry Collector]
  App -->|logs| Loki[Loki/Elastic]
  Prom --> Graf[Grafana]
  OTel --> Jaeger[Jaeger/Zipkin]
  Loki --> Graf
```

---

## 10) –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **AuthN**: OAuth2/OIDC, mTLS –¥–ª—è —Å–µ—Ä–≤–∏—Å-—Å–µ—Ä–≤–∏—Å.  
- **AuthZ**: RBAC/ABAC, –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ —à–ª—é–∑–µ –∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö.  
- **–°–µ–∫—Ä–µ—Ç—ã**: Vault/KMS/Secrets Manager; **–Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞ –≤ Git**.  
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: TLS –≤–µ–∑–¥–µ, at-rest (KMS-managed keys).  
- **Zero Trust**: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º hop, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞.  
- **Supply chain**: SBOM, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–Ω—ã–µ —Å–∫–∞–Ω–µ—Ä—ã, –ø–æ–¥–ø–∏—Å—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, SLSA.

---

## 11) Data Patterns

- **CQRS**: —Ä–∞–∑–¥–µ–ª—è—Ç—å write-–º–æ–¥–µ–ª—å (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é) –∏ read-–ø—Ä–æ–µ–∫—Ü–∏–∏ (–¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ/–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ).  
- **Event Sourcing**: –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã ‚Äî —Å–æ–±—ã—Ç–∏—è; —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –ø—Ä–æ–µ–∫—Ü–∏—è.  
- **Outbox/Inbox**: –±–µ–∑ dual-write, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π.  
- **CDC**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î ‚Üí —Å–æ–±—ã—Ç–∏—è (Debezium).  
- **Materialized Views**: –±—ã—Å—Ç—Ä—ã–µ —á—Ç–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.  
- **CRDT**: –±–µ–∑–∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –∞–∫—Ç–∏–≤-–∞–∫—Ç–∏–≤.

```mermaid
flowchart LR
  User --> API
  API -->|Tx| DB[(Write DB)]
  DB --> Outbox[(Outbox Table)]
  Outbox -->|CDC| K[(Kafka)]
  K --> Proj[Projector]
  Proj --> Read[(Read Model / Cache / Search)]
```

---

## 12) ¬´–°–∞–ª—Ñ–µ—Ç–æ—á–Ω—ã–µ¬ª –æ—Ü–µ–Ω–∫–∏

- **QPS**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * –¥–µ–π—Å—Ç–≤–∏—è/—Å–µ–∫.  
- **Throughput**: QPS * —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è.  
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –≤ –¥–µ–Ω—å = throughput * 86400 + overhead + —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è.  
- **Kafka**: –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚âà —Ü–µ–ª–µ–≤–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π * –∑–∞–ø–∞—Å; –¥–∏—Å–∫–∏ ‚Äî sequential write, network ‚Äî 10/25/40GbE.  
- **Redis**: RAM = —Ä–∞–±–æ—á–∏–µ –∫–ª—é—á–∏ * (key+value+overhead) * —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è + –∑–∞–ø–∞—Å.

---

## 13) –ö–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è: AWS/Azure/GCP

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è        | AWS                 | Azure               | GCP                    |
|---|---|---|---|
| –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î   | RDS/Aurora          | Azure SQL/PG        | Cloud SQL/AlloyDB      |
| –î–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ      | DocumentDB/DynamoDB | Cosmos DB           | Firestore              |
| –ö–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ      | Keyspaces (C*)      | Managed Cassandra   | Managed Cassandra (Ops) |
| –ì—Ä–∞—Ñ–æ–≤—ã–µ         | Neptune             | Cosmos DB (Gremlin) | Neo4j Aura              |
| –ö—ç—à              | ElastiCache         | Azure Cache Redis   | Memorystore            |
| –ë—Ä–æ–∫–µ—Ä—ã/—Å—Ç—Ä–∏–º–∏–Ω–≥ | MSK/Kinesis/SQS/SNS | Event Hubs/Service Bus | Pub/Sub               |
| –õ–æ–≥–∏/–º–µ—Ç—Ä–∏–∫–∏     | CloudWatch          | Azure Monitor       | Cloud Monitoring/Logging |
| –¢—Ä–µ–π—Å–∏–Ω–≥         | X-Ray               | App Insights        | Cloud Trace/OTel       |
| –°–µ–∫—Ä–µ—Ç—ã/KMS      | Secrets Manager/KMS | Key Vault           | Secret Manager/KMS     |

---

## 14) –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 14.1. –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏–∑–≤–µ—Å—Ç–µ–Ω? SLO –∑–∞–ø–∏—Å–∞–Ω—ã?  
- Rollback –ø–ª–∞–Ω –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–∏–º—ã?  
- –ê–ª–µ—Ä—Ç—ã –ø–æ SLO –∏ error budget?  
- –î–∞—à–±–æ—Ä–¥—ã: –±–∏–∑–Ω–µ—Å + —Ç–µ—Ö–Ω–∏–∫–∞.  
- Chaos-–∫–µ–π—Å—ã –ø—Ä–æ–≥–Ω–∞–Ω—ã (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏)?

### 14.2. –ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã
- Dual-write –±–µ–∑ outbox ‚Üí –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.  
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ ‚Üí –¥—É–±–ª–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –¥–µ–Ω—å–≥–∞–º/–æ—à–∏–±–∫–∞–º.  
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤ Kafka ‚Üí –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è ‚Üí –Ω–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.  
- ¬´One-size-fits-all¬ª –ë–î ‚Üí –ø–ª–æ—Ö–æ –≤—Å–µ–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º.  
- –°–µ–∫—Ä–µ—Ç—ã –≤ Git, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ PII –±–µ–∑ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è.

### 14.3. –ú–∏–Ω–∏-—Å–ª–æ–≤–∞—Ä—å
- **RPO/RTO** ‚Äî –¥–æ–ø—É—Å—Ç–∏–º–∞—è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö / –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.  
- **ISR** ‚Äî in-sync replicas –≤ Kafka.  
- **Backpressure** ‚Äî —É–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ.  
- **Cold start** ‚Äî –ø—Ä–æ–≥—Ä–µ–≤ serverless/—Ñ—É–Ω–∫—Ü–∏–π.

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∑–∞–π–Ω ‚Äî —ç—Ç–æ –Ω–µ –Ω–∞–±–æ—Ä ¬´–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤¬ª, –∞ —É–º–µ–Ω–∏–µ **—Å–¥–µ–ª–∞—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä** –ø–æ–¥ –≤–∞—à–∏ SLO –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.  
–î–µ—Ä–∂–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É **–Ω–∞–±–ª—é–¥–∞–µ–º–æ–π**, –¥–µ–ª–∞–π—Ç–µ **–º–∞–ª—ã–µ —à–∞–≥–∏**, –∑–∞–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è**, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è (ADR) –∏ —Ç—Ä–µ–Ω–∏—Ä—É–π—Ç–µ **—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**.
